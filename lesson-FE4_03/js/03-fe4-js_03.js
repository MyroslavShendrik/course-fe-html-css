console.log(
    '%c 3.–í—ñ–¥–∫–ª–∞–¥–µ–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è (–∑ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—î—é Intersection Observer) ',
    'color: white; background-color: #D33F49',
);

//todo: –î–æ–¥–∞—Ç–∫–æ–≤–∞ –ª–æ–≥—ñ–∫–∞ –¥–ª—è <–£—Ä–æ–∫-FE4-JS-02 -> –†–æ–∑–¥—ñ–ª.1>
const button3 = document.querySelector('.button-3');
const boxRootMargin = document.getElementById('box-rootMargin');
// console.log("button1:", button1); //!
// console.log("boxRootMargin:", boxRootMargin); //!

if (button3.textContent === 'On') {
    boxRootMargin.style.display = 'block';
};
//todo: _________________________________________________


//! –í—ñ–¥–∫–ª–∞–¥–µ–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è (–∑ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—î—é Intersection Observer)
console.warn(`–í—ñ–¥–∫–ª–∞–¥–µ–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è (–∑ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—î—é Intersection Observer)‚Äã‚Äã: \n ${((window.location.href).split('/')).slice(0, -2).join('/') + '/'}${"lesson-FE4_03/images/observer-concept.gif"}`);
console.warn("–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è Intersection Observer: \n https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver/IntersectionObserver");
console.warn("–ü—Ä–æ—Å—Ç—ñ —Ä—ñ—à–µ–Ω–Ω—è –¥–ª—è —Å–∫–ª–∞–¥–Ω–∏—Ö –∑–∞–≤–¥–∞–Ω—å \n —ñ–∑ Intersection Observer API: \n https://www.youtube.com/watch?v=ZYqBZmU-tA0");
console.warn("–°–∏–Ω—Ç–∞–∫—Å–∏—Å Intersection Observer:");
//? ‚ú¥Ô∏è Intersection Observer API
//? ‚Äì —Ü–µ —Å—É—á–∞—Å–Ω–∞ –≤–µ–±-—Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—è JavaScript,
//? —è–∫–∞ –¥–æ–∑–≤–æ–ª—è—î –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –≤—ñ–¥—Å—Ç–µ–∂—É–≤–∞—Ç–∏
//? –ø–µ—Ä–µ—Ç–∏–Ω–∞–Ω–Ω—è (–≤—Ö–æ–¥–∂–µ–Ω–Ω—è/–≤–∏—Ö—ñ–¥) –µ–ª–µ–º–µ–Ω—Ç–∞ (Target)
//? –∑ –≤–∏–¥–∏–º–æ—ó –æ–±–ª–∞—Å—Ç—ñ (Root -> viewport)
//? –∞–±–æ —ñ–Ω—à–æ–≥–æ –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

//? üìå –ö–æ–ª–∏ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ Intersection Observer:
//?    üî∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ª—ñ–Ω–∏–≤–æ –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è(lazy - loading),
//?    üî∏ –≤—ñ–¥—Å—Ç–µ–∂—É–≤–∞—Ç–∏ –ø–æ—è–≤—É —Å–µ–∫—Ü—ñ–π –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –¥–ª—è –∞–Ω—ñ–º–∞—Ü—ñ–π —á–∏ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó),
//?    üî∏ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω—É –ø—Ä–æ–∫—Ä—É—á—É–≤–∞–Ω–Ω—è (infinite scroll),
//?    üî∏ –≤—ñ–¥—Å—Ç–µ–∂—É–≤–∞—Ç–∏ –ø–µ—Ä–µ–≥–ª—è–¥ —Ä–µ–∫–ª–∞–º–∏ –∞–±–æ –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.

//? ‚ö†Ô∏è –ü–µ—Ä–µ–≤–∞–≥–∏ –ø–µ—Ä–µ–¥ scroll - –ø–æ–¥—ñ—è–º–∏:
//?    ‚úÖ –ë—ñ–ª—å—à –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ (–Ω–µ –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –Ω–∞ –∫–æ–∂–µ–Ω –ø—ñ–∫—Å–µ–ª—å –ø—Ä–æ–∫—Ä—É—á—É–≤–∞–Ω–Ω—è),
//?    ‚úÖ –ù–µ –≤–∏–º–∞–≥–∞—î throttling/debounce,
//?    ‚úÖ –ü—Ä–∞—Ü—é—î –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, –Ω–µ –±–ª–æ–∫—É—î –æ—Å–Ω–æ–≤–Ω–∏–π –ø–æ—Ç—ñ–∫.
console.log(
    `%c
    IntersectionObserver(callback, options):
    üî∏ callback - —Ñ—É–Ω–∫—Ü—ñ—è, —â–æ –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –ø—Ä–∏ –∫–æ–∂–Ω–æ–º—É –≤—Ö–æ–¥—ñ/–≤–∏—Ö–æ–¥—ñ –µ–ª–µ–º–µ–Ω—Ç–∞ –≤ –∑–æ–Ω—É –≤–∏–¥–∏–º–æ—Å—Ç—ñ.
    üî∏ options –º–æ–∂–µ –º—ñ—Å—Ç–∏—Ç–∏:
        üî∏ root: –µ–ª–µ–º–µ–Ω—Ç-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, —â–æ–¥–æ —è–∫–æ–≥–æ –≤–µ—Å—Ç–∏ —Å–ø–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–Ω—è (–∑–∞ —É–º–æ–≤—á–∞–Ω–Ω—è–º viewport(root: null)).
        üî∏ threshold: —á–∞—Å—Ç–∫–∞ –≤–∏–¥–∏–º–æ—Å—Ç—ñ –µ–ª–µ–º–µ–Ω—Ç–∞ (0 - –Ω–∞–≤—ñ—Ç—å 1px, 1.0 - –ø–æ–≤–Ω—ñ—Å—Ç—é)
            –ø—Ä–∏ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—ñ —è–∫–∏—Ö –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –∫–æ–ª–±–µ–∫.
        üî∏ rootMargin: –≤—ñ–¥—Å—Ç—É–ø–∏ –Ω–∞–≤–∫–æ–ª–æ root. –ó–º—ñ—â–µ–Ω–Ω—è –∑–æ–Ω–∏ (margin) –Ω–∞–≤–∫–æ–ª–æ root
            (—Ñ–æ—Ä–º–∞—Ç —è–∫ —É CSS: top/right/bottom/left).
    `,
    'color: blue; font-size: 18px',
);
console.log(". . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .");


//! –ü—Ä–æ—Å—Ç–∏–π –ø—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Intersection Observer
console.warn("–ü—Ä–æ—Å—Ç–∏–π –ø—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Intersection Observer:");
const target = document.getElementById("target");
const scrollContainer = document.getElementById("scrollContainer");
console.log("scrollContainer:", scrollContainer); //!

const observer = new IntersectionObserver(
    (entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                console.log("–ï–ª–µ–º–µ–Ω—Ç –≤–∏–¥–Ω–æ!");
                target.style.background = "lightgreen";
            } else {
                console.log("–ï–ª–µ–º–µ–Ω—Ç –ø—ñ—à–æ–≤ —ñ–∑ –∑–æ–Ω–∏ –≤–∏–¥–∏–º–æ—Å—Ç—ñ...");
                target.style.background = "yellow";
            }
        }
        );
    },
    {
        root: null,
        // root: scrollContainer, //! –í–Ü–î–ö–†–ò–¢–ò (—ñ –≤ CSS) –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è "box-target" —É –≤—ñ–∫–Ω—ñ [scrollContainer]
        threshold: 0.5, //todo: –í–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è, –∫–æ–ª–∏ 50% –æ–±'—î–∫—Ç–∞ –≤–∏–¥–Ω–æ
        // threshold: [0, 0.25, 0.5, 0.75, 1], ////todo: –ü–µ—Ä–µ—Ä–∞—Ö—É–Ω–æ–∫ –ø–µ—Ä–µ—Ç–∏–Ω—É root –∫–æ–∂–Ω–æ—ó —á–≤–µ—Ä—Ç—ñ –≤–∏–¥–∏–º–æ—Å—Ç—ñ.
        //! –ü–†–ò–•–û–í–ê–¢–ò (—ñ –≤ CSS) –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è "box-target" —É –≤—ñ–∫–Ω—ñ [scrollContainer]
        rootMargin: '0px 0px -50% 0px'  //todo: –ó–Ω–∏–∑—É –∑–º–µ–Ω—à–∏–ª–∏ –∑–æ–Ω—É –Ω–∞ 50% –≤–∏—Å–æ—Ç–∏ –≤'—é–ø–æ—Ä—Ç—É
    }
);

console.log("observer:", observer); //!

observer.observe(target); //todo: –î–æ–¥–∞—î –µ–ª–µ–º–µ–Ω—Ç –¥–æ —Å–ø–∏—Å–∫—É –≤—ñ–¥—Å–ª—ñ–¥–∫–æ–≤—É–≤–∞–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
console.log("-----------------------------------------------------------------");


//! –ü–æ–ª—ñ—Ñ—ñ–ª Intersection Observer
// console.warn("–ü–æ–ª—ñ—Ñ—ñ–ª Intersection Observer:");
//? ‚ú¥Ô∏è –•–æ—á–∞ Intersection Observer API –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è
//? –≤—Å—ñ–º–∞ –æ—Å—Ç–∞–Ω–Ω—ñ–º–∏ –≤–µ—Ä—Å—ñ—è–º–∏ —Å—É—á–∞—Å–Ω–∏—Ö –±—Ä–∞—É–∑–µ—Ä—ñ–≤,
//? —Å–ª—ñ–¥ –ø–æ–¥–±–∞—Ç–∏ –ø—Ä–æ –ø–æ–ª—ñ—Ñ—ñ–ª—ñ—ó,
//? —â–æ–± –≤—ñ–Ω –≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–æ –ø—Ä–∞—Ü—é–≤–∞–≤ —É –≤—Å—ñ—Ö –∞–∫—Ç—É–∞–ª—å–Ω–∏—Ö –≤–µ—Ä—Å—ñ—è—Ö.
//? –ü–æ–ª—ñ—Ñ–µ–º –≤—ñ–¥ WICG –º–æ–∂–Ω–∞ –≤–∑—è—Ç–∏ –∑ —Ü—å–æ–≥–æ GitHub-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—è:
//? https://github.com/w3c/IntersectionObserver/tree/master/polyfill

//? ‚ú¥Ô∏è –ù–∞–π–ø—Ä–æ—Å—Ç—ñ—à–∏–π —Å–ø–æ—Å—ñ–± –¥–æ–¥–∞—Ç–∏ –ü–æ–ª—ñ—Ñ–µ–º
//? - —Ü–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ polyfill.io:
//? https://polyfill.io/v3/
//? –í—ñ–Ω –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î —Ç—ñ–ª—å–∫–∏ –∑–∞–∑–Ω–∞—á–µ–Ω—ñ –ø–æ–ª—ñ—Ñ—ñ–ª—ñ—ó,
//? —ñ —Ç—ñ–ª—å–∫–∏ —Ç–æ–¥—ñ, –∫–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä –≤–∏–º–∞–≥–∞—î —Ü—å–æ–≥–æ.
//? –¶–µ –¥–æ–ø–æ–º–∞–≥–∞—î –∑–≤–µ—Å—Ç–∏ –≤–∞–≥—É —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –¥–æ –º—ñ–Ω—ñ–º—É–º—É,
//? –∞–ª–µ –¥–æ–∑–≤–æ–ª—è—î –ø–æ–ª—ñ—Ñ—ñ–ª—É –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –±–µ–∑ –ø–æ–¥–∞–ª—å—à–æ–≥–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è.

//? ‚ú≥Ô∏è –Ñ–¥–∏–Ω–∏–º –Ω–µ–¥–æ–ª—ñ–∫–æ–º –ø–æ–ª—ñ—Ñ—ñ–ª–ª–∞ —î —Ç–µ,
//? —â–æ –≤–∏ –Ω–µ –æ—Ç—Ä–∏–º–∞—î—Ç–µ –ø–µ—Ä–µ–≤–∞–≥ –≤ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ
//? –≤ —Å—Ç–∞—Ä–∏—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö, –∞–ª–µ —Å–∫—Ä–∏–ø—Ç –±—É–¥–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏
//? —ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑–º–æ–∂–µ –≤–∑–∞—î–º–æ–¥—ñ—è—Ç–∏ –∑ –≤–µ–±-—Å—Ç–æ—Ä—ñ–Ω–∫–æ—é.


//! –û—Å–Ω–æ–≤–Ω—ñ –º–µ—Ç–æ–¥–∏ Intersection Observer API:
//?     üìå –û—Å–Ω–æ–≤–Ω–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏ Intersection Observer API —î::
//? üî∏ observe(): –î–æ–¥–∞—î –µ–ª–µ–º–µ–Ω—Ç –¥–æ —Å–ø–∏—Å–∫—É –≤—ñ–¥—Å–ª—ñ–¥–∫–æ–≤—É–≤–∞–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤.
//? üî∏ unobserve(): –í–∏–¥–∞–ª—è—î –µ–ª–µ–º–µ–Ω—Ç –∑—ñ —Å–ø–∏—Å–∫—É –≤—ñ–¥—Å–ª—ñ–¥–∫–æ–≤—É–≤–∞–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤.
//? üî∏ disconnect(): –í–∏–¥–∞–ª—è—î –≤—Å—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ –∑—ñ —Å–ø–∏—Å–∫—É –≤—ñ–¥—Å–ª—ñ–¥–∫–æ–≤—É–≤–∞–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤.
//? üî∏ takeRecords(): –ü–æ–≤–µ—Ä—Ç–∞—î –º–∞—Å—Å–∏–≤ –∑ –µ–ª–µ–º–µ–Ω—Ç–∞–º–∏, —è–∫—ñ –∑–Ω–∞—Ö–æ–¥—è—Ç—å—Å—è –≤ –∑–æ–Ω—ñ –≤–∏–¥–∏–º–æ—Å—Ç—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.
